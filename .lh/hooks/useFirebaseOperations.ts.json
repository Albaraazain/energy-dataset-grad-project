{
    "sourceFile": "hooks/useFirebaseOperations.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1730137159526,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1730137159526,
            "name": "Commit-0",
            "content": "'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { \r\n  addDoc, \r\n  updateDoc, \r\n  deleteDoc,\r\n  collection,\r\n  doc,\r\n  getDocs,\r\n  setDoc\r\n} from 'firebase/firestore';\r\nimport { firestoreDb, categoryConverter, linkConverter } from '@/lib/firebase/firestore';\r\nimport { Category, Link } from '@/types';\r\n\r\nexport function useFirebaseOperations() {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<Error | null>(null);\r\n\r\n  // Category Operations\r\n  const addCategory = async (category: Omit<Category, 'id'>) => {\r\n    setLoading(true);\r\n    try {\r\n      const docRef = doc(firestoreDb.categories.getRef());\r\n      await setDoc(docRef, categoryConverter.toFirestore({\r\n        ...category,\r\n        links: []\r\n      }));\r\n      setLoading(false);\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Error adding category:', err);\r\n      setError(err instanceof Error ? err : new Error('Unknown error'));\r\n      setLoading(false);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const updateCategory = async (categoryId: string, data: Partial<Category>) => {\r\n    setLoading(true);\r\n    try {\r\n      const docRef = firestoreDb.categories.getDocRef(categoryId);\r\n      await updateDoc(docRef, categoryConverter.toFirestore(data));\r\n      setLoading(false);\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Error updating category:', err);\r\n      setError(err instanceof Error ? err : new Error('Unknown error'));\r\n      setLoading(false);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteCategory = async (categoryId: string) => {\r\n    setLoading(true);\r\n    try {\r\n      const docRef = firestoreDb.categories.getDocRef(categoryId);\r\n      await deleteDoc(docRef);\r\n      setLoading(false);\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Error deleting category:', err);\r\n      setError(err instanceof Error ? err : new Error('Unknown error'));\r\n      setLoading(false);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Link Operations\r\n  const addLink = async (categoryId: string, link: Link) => {\r\n    setLoading(true);\r\n    try {\r\n      const docRef = doc(firestoreDb.categories.links.getRef(categoryId));\r\n      await setDoc(docRef, linkConverter.toFirestore(link));\r\n      setLoading(false);\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Error adding link:', err);\r\n      setError(err instanceof Error ? err : new Error('Unknown error'));\r\n      setLoading(false);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const updateLink = async (categoryId: string, linkId: string, data: Partial<Link>) => {\r\n    setLoading(true);\r\n    try {\r\n      const docRef = firestoreDb.categories.links.getDocRef(categoryId, linkId);\r\n      await updateDoc(docRef, linkConverter.toFirestore(data));\r\n      setLoading(false);\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Error updating link:', err);\r\n      setError(err instanceof Error ? err : new Error('Unknown error'));\r\n      setLoading(false);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const deleteLink = async (categoryId: string, linkId: string) => {\r\n    setLoading(true);\r\n    try {\r\n      const docRef = firestoreDb.categories.links.getDocRef(categoryId, linkId);\r\n      await deleteDoc(docRef);\r\n      setLoading(false);\r\n      return true;\r\n    } catch (err) {\r\n      console.error('Error deleting link:', err);\r\n      setError(err instanceof Error ? err : new Error('Unknown error'));\r\n      setLoading(false);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  return {\r\n    loading,\r\n    error,\r\n    addCategory,\r\n    updateCategory,\r\n    deleteCategory,\r\n    addLink,\r\n    updateLink,\r\n    deleteLink,\r\n  };\r\n}"
        }
    ]
}